{
  "openapi": "3.0.0",
  "info": {
    "title": "Public Service Assistant API",
    "version": "1.0.0",
    "description": "API documentation for the Public Service Assistant project (using RAG)"
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "Local server"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "paths": {
    "/api/advices": {
      "post": {
        "tags": [
          "Advices"
        ],
        "summary": "Créer un conseil",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Conseil créé"
          }
        }
      },
      "get": {
        "tags": [
          "Advices"
        ],
        "summary": "Récupérer des conseils",
        "responses": {
          "200": {
            "description": "Liste des conseils"
          }
        }
      }
    },
    "/api/appointments": {
      "post": {
        "tags": [
          "Appointments"
        ],
        "summary": "Créer un rendez-vous",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Rendez-vous créé"
          }
        }
      },
      "get": {
        "tags": [
          "Appointments"
        ],
        "summary": "Lister les rendez-vous",
        "responses": {
          "200": {
            "description": "Liste des rendez-vous"
          }
        }
      }
    },
    "/api/appointments/{id}/status": {
      "put": {
        "tags": [
          "Appointments"
        ],
        "summary": "Mettre à jour le statut d'un rendez-vous",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Statut mis à jour"
          }
        }
      }
    },
    "/api/auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Inscription d'un utilisateur",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nom": {
                    "type": "string"
                  },
                  "prenom": {
                    "type": "string"
                  },
                  "telephone": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "adresse": {
                    "type": "string"
                  },
                  "age": {
                    "type": "integer"
                  },
                  "password": {
                    "type": "string"
                  },
                  "role": {
                    "type": "string"
                  },
                  "specialite": {
                    "type": "string"
                  },
                  "hopital": {
                    "type": "string"
                  }
                },
                "required": [
                  "telephone",
                  "password",
                  "nom"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Utilisateur créé avec succès"
          },
          "400": {
            "description": "Requête invalide"
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Connexion via email ou téléphone",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "identifiant": {
                    "type": "string",
                    "description": "Email ou téléphone"
                  },
                  "password": {
                    "type": "string"
                  }
                },
                "required": [
                  "identifiant",
                  "password"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Connexion réussie"
          },
          "400": {
            "description": "Identifiants invalides"
          }
        }
      }
    },
    "/api/auth/profile": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Profil de l'utilisateur connecté",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Profil retourné"
          },
          "401": {
            "description": "Non authentifié"
          }
        }
      }
    },
    "/api/availability": {
      "post": {
        "tags": [
          "Availability"
        ],
        "summary": "Définir la disponibilité",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Disponibilité enregistrée"
          }
        }
      },
      "get": {
        "tags": [
          "Availability"
        ],
        "summary": "Récupérer les disponibilités",
        "responses": {
          "200": {
            "description": "Liste des disponibilités"
          }
        }
      }
    },
    "/api/geolocation": {
      "get": {
        "tags": [
          "Geolocation"
        ],
        "summary": "Récupérer les informations de géolocalisation",
        "responses": {
          "200": {
            "description": "Informations de géolocalisation"
          }
        }
      }
    },
    "/api/measures": {
      "post": {
        "tags": [
          "Measures"
        ],
        "summary": "Ajouter une mesure pour l'utilisateur connecté",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mesure ajoutée"
          },
          "401": {
            "description": "Non authentifié"
          }
        }
      }
    },
    "/api/measures/history/{patientId}": {
      "get": {
        "tags": [
          "Measures"
        ],
        "summary": "Historique des mesures d'un patient",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "in": "path",
            "name": "patientId",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Historique retourné"
          },
          "401": {
            "description": "Non authentifié"
          }
        }
      }
    },
    "/api/messages": {
      "post": {
        "tags": [
          "Messages"
        ],
        "summary": "Envoyer un message",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Message envoyé"
          }
        }
      },
      "get": {
        "tags": [
          "Messages"
        ],
        "summary": "Récupérer les messages",
        "responses": {
          "200": {
            "description": "Liste des messages"
          }
        }
      }
    },
    "/api/notifications": {
      "post": {
        "tags": [
          "Notifications"
        ],
        "summary": "Créer une notification",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "additionalProperties": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Notification créée"
          }
        }
      },
      "get": {
        "tags": [
          "Notifications"
        ],
        "summary": "Lister les notifications d'un utilisateur",
        "responses": {
          "200": {
            "description": "Liste des notifications"
          }
        }
      }
    },
    "/api/notifications/{id}/read": {
      "put": {
        "tags": [
          "Notifications"
        ],
        "summary": "Marquer une notification comme lue",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification mise à jour"
          }
        }
      }
    },
    "/api/notifications/{id}": {
      "delete": {
        "tags": [
          "Notifications"
        ],
        "summary": "Supprimer une notification",
        "parameters": [
          {
            "in": "path",
            "name": "id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Notification supprimée"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Advices",
      "description": "Conseils médicaux"
    },
    {
      "name": "Appointments",
      "description": "Gestion des rendez-vous"
    },
    {
      "name": "Auth",
      "description": "Endpoints d'authentification"
    },
    {
      "name": "Availability",
      "description": "Disponibilités des médecins"
    },
    {
      "name": "Geolocation",
      "description": "Géolocalisation et services associés"
    },
    {
      "name": "Measures",
      "description": "Mesures de santé"
    },
    {
      "name": "Messages",
      "description": "Messagerie entre utilisateurs"
    },
    {
      "name": "Notifications",
      "description": "Gestion des notifications"
    }
  ]
}